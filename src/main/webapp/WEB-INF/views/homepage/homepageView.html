<!DOCTYPE html>
<html lang="en">

<head>
<title>내가 알지 못한 곳 - HOME</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<!--[if lt IE 9]>
<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="shortcut icon" href="images/favicon.ico" />
<link href='https://fonts.googleapis.com/css?family=Lato:400,300,700&amp;subset=latin,latin-ext' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="../../../resources/bootstrap/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="../../../resources/bootstrap/css/animate.css" />
<link rel="stylesheet" type="text/css" href="../../../resources/bootstrap/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="../../../resources/bootstrap/css/swiper.min.css" />
<link rel="stylesheet" type="text/css" href="../../../resources/bootstrap/css/style.css" />
<link rel="stylesheet" type="text/css" href="../../../resources/customize/css/homepageView.css" />
<script src="javascript/pace.min.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="javascript/swiper.jquery.min.js"></script>
<script src="javascript/animate-on-scroll.js"></script>
<script src="javascript/script.js"></script>

<script src="../../../resources/js/myroute/myRoute.js"></script>
<script src="../../../resources/js/myroute/myRouteController.js"></script>
<script src="../../../resources/js/myhiddenplace/myHiddenPlace.js"></script>
<script src="../../../resources/js/myhiddenplace/myHiddenPlaceController.js"></script>
<style>

@font-face {
   font-family: 'baemin';
   src: url(../../../resources/bootstrap/fonts/baemin.ttf) format('truetype');
}

.bestTitle {
   font-family: 'baemin';
   font-size: 50px;
}

.bookmark_star {
  position: absolute !important; 
  right: 3%;
  top: 3%; 
  max-width: 25px;
  height: auto;
  margin: 0;
  z-index: 3;
}

.figureMHP figcaption > p {
	margin-left: -200px;
	font-size: 15px;
}

.figureMR figcaption > p {
	margin-left: -200px;
	font-size: 15px;
}

.hTextLine {
    white-space: nowrap; 
    width: 25em;
    text-align: right;
    overflow: hidden;
    text-overflow: ellipsis;
}

.imgSize {
 	height: 360px;
}



hr {
	border: solid 1px #f7f5f0;
}

</style>
</head>

<!-- 홈페이지 MyHiddenPlace best3 이벤트 핸들링 -->
<script type="text/javascript">
	$(document).ready(function() {

			var nowLoginId = localStorage.getItem('userId');
			nowLoginId="ss";
			
			var mhpController = new MyHiddenPlaceController();
			mhpController.requestUpdateBestMHP();
			var myHiddenPlaces = mhpController.requestBestMHP();
			
			var bestNum1 = myHiddenPlace[0].num;
			var bestNum2 = myHiddenPlace[1].num;
			var bestNum3 = myHiddenPlace[2].num;
			
			var bookmarkAll = mhpController.requestBookmarkAllMHP(nowLoginId);
			
			if(nowLoginId == null) {
				
				for (var i = 0; i < myHiddenPlaces.length; i++) {

					var figureMHP = $('<figure class="figureMHP" data-animation="fadeIn"></figure>'); //figure태그
					var imgMHP = $('<img class="imgSize" src="' + myHiddenPlaces[i].imageUrl + '"/>'); //이미지
					var figcaptionMHP = $('<figcaption></figcaption>'); //figcaption태그
					var hTitle = $('<h2 class="hTextLine"></h2>').html(myHiddenPlaces[i].title);
					var pUserNicknameMHP = $('<p></p>').html(myHiddenPlaces[i].userNickname); //작성자
					var pDateMHP = $('<p></p>').html(myHiddenPlaces[i].writeDate); //작성일자
					var pReadCountMHP = $('<p></p>').html(myHiddenPlaces[i].readCount); //추천수
					var pNumMHP = $('<p hidden></p>').html(myHiddenPlaces[i].num); //글번호
					
					figcaptionMHP.append(hTitle, pUserNicknameMHP, pDateMHP, pReadCountMHP, pNumMHP); //figcaption태그에 작성자, 작성일자, 추천수, 글번호
					figureMHP.append(imgMHP, figcaptionMHP); // figure태그에 이미지, figcaption append
					$('#bestMHP3').append(figureMHP); //내알못 div에 bestMHP[i] 게시글 append

				}
				
			} else {
			
				for (var i = 0; i < myHiddenPlaces.length; i++) {

					var figureMHP = $('<figure class="figureMHP" data-animation="fadeIn"></figure>'); //figure태그
					var imgMHP = $('<img class="imgSize" src="' + myHiddenPlaces[i].imageUrl + '"/>'); //이미지
					var figcaptionMHP = $('<figcaption></figcaption>'); //figcaption태그
					var hTitle = $('<h2 class="hTextLine"></h2>').html(myHiddenPlaces[i].title);
					var pUserNicknameMHP = $('<p></p>').html(myHiddenPlaces[i].userNickname); //작성자
					var pDateMHP = $('<p></p>').html(myHiddenPlaces[i].writeDate); //작성일자
					var pReadCountMHP = $('<p></p>').html(myHiddenPlaces[i].readCount); //추천수
					var pNumMHP = $('<p hidden></p>').html(myHiddenPlaces[i].num); //글번호
				
					for(var i = 0; i < bookmarkAll.length; i++) {
						
						if(bookmarkAll[i].num == bestNum1 || bookmarkAll[i].num == bestNum2 || bookmarkAll[i].num == bestNum3) {
							var imgBookmark = $('<img class="bookmark_star" style="opacity:1" src="../../../resources/bootstrap/img/bookmark_success_star.png" data-toggle="tooltip" data-placement="left" title="즐겨찾기 추가하기" />')	
						} else {
							var	imgBookmark = $('<img class="bookmark_star" style="opacity:1" src="../../../resources/bootstrap/img/bookmark_star.png" data-toggle="tooltip" data-placement="left" title="즐겨찾기 추가하기" />')						
						}

					}	
						
					figcaptionMHP.append(hTitle, pUserNicknameMHP, pDateMHP, pReadCountMHP, pNumMHP, imgBookmark); //figcaption태그에 작성자, 작성일자, 추천수, 글번호
					figureMHP.append(imgMHP, figcaptionMHP); // figure태그에 이미지, figcaption append
					$('#bestMHP3').append(figureMHP); //내알못 div에 bestMHP[i] 게시글 append
					
				}
				
			}

	});
</script>

<!-- 홈페이지 MyRoute best3 이벤트 핸들링 -->
<script type="text/javascript">
	$(document).ready(function() {

		var nowLoginId = localStorage.getItem('userId');
		
		var mrController = new MyRouteController();
		var myRoutes = mrController.requestBestMR(nowLoginId);
		
		if(nowLoginId == null) {
			
			for (var i = 0; i < myRoutes.length; i++) {

				var figureMR = $('<figure class="figureMR" data-animation="fadeIn"></figure>'); //figure태그
				var imgMR = $('<img class="imgSize" src="' + myRoutes[i].imageUrl + '"/>'); //이미지
				var figcaptionMR = $('<figcaption></figcaption>'); //figcaption태그
				var hTitle = $('<h2 class="hTextLine"></h2>').html(myRoutes[i].title);
				var pUserNicknameMR = $('<p></p>').html(myRoutes[i].userNickname); //작성자
				var pDateMR = $('<p></p>').html(myRoutes[i].writeDate); //작성일자
				var pReadCountMR = $('<p></p>').html(myRoutes[i].readCount); //추천수
				var pNumMR = $('<p hidden></p>').html(myRoutes[i].num); //글번호
				
				figcaptionMR.append(hTitle, pUserNicknameMR, pDateMR, pReadCountMR, pNumMR); //figcaption태그에 작성자, 작성일자, 추천수, 글번호
				figureMR.append(imgMR, figcaptionMR); // figure태그에 이미지, figcaption append
				$('#bestMR3').append(figureMR); //내알못 div에 bestMHP[i] 게시글 append

			}
			
		} else {
		
			for (var i = 0; i < myRoutes.length; i++) {

				var figureMR = $('<figure class="figureMR" data-animation="fadeIn"></figure>'); //figure태그
				var imgMR = $('<img class="imgSize" src="' + myRoutes[i].imageUrl + '"/>'); //이미지
				var figcaptionMR = $('<figcaption></figcaption>'); //figcaption태그
				var hTitle = $('<h2 class="hTextLine"></h2>').html(myRoutes[i].title);
				var pUserNicknameMR = $('<p></p>').html(myRoutes[i].userNickname); //작성자
				var pDateMR = $('<p></p>').html(myRoutes[i].writeDate); //작성일자
				var pReadCountMR = $('<p></p>').html(myRoutes[i].readCount); //추천수
				var pNumMR = $('<p hidden></p>').html(myRoutes[i].num); //글번호
			
				if(myRoutes[i].bookmark == 1) {
					var imgBookmark = $('<img class="bookmark_star" style="opacity:1" src="../../../resources/bootstrap/img/bookmark_success_star.png" data-toggle="tooltip" data-placement="left" title="즐겨찾기 추가하기" />')
				} else {
					var	imgBookmark = $('<img class="bookmark_star" style="opacity:1" src="../../../resources/bootstrap/img/bookmark_star.png" data-toggle="tooltip" data-placement="left" title="즐겨찾기 추가하기" />')						
				}

				figcaptionMR.append(hTitle, pUserNicknameMR, pDateMR, pReadCountMR, pNumMR, imgBookmark); //figcaption태그에 작성자, 작성일자, 추천수, 글번호
				figureMHP.append(imgMHP, figcaptionMHP); // figure태그에 이미지, figcaption append
				$('#bestMR3').append(figureMR); //내알못 div에 bestMHP[i] 게시글 append
				
			}
			
		}

});
</script>

<!-- 글조회 (MHP) 이벤트 핸들링 -->
<script>
$(document).ready(function() {
		$('.figureMHP').click(function() {
			var num = $(this).children().eq(1).children().eq(4).text();
			var mhpController = new MyHiddenPlaceController();
			mhpController.requestSelectOneMHP(num);
		});
});
</script>

<!-- 글조회 (MR) 이벤트 핸들링 -->
<script>
$(document).ready(function() {
		$('.figureMR').click(function() {
			var num = $(this).children().eq(1).children().eq(4).text();
			
			var mrController = new MyRouteController();
			mrController.requestSelectOneMR(num);
		});
});
</script>

<!-- 즐겨찾기 등록 이벤트 핸들링 -->
<script>
$(document).ready(function() {
	$('.bookmark_star').click(function() {
		
		userId = localStorage.getItem('userId');
   		var num = $(this).parent().children().eq(4).text();
   		
   		var mhpController = new MyHiddenPlaceController();
   		var isSuccess = mhpController.requestInsertBookmark(userId, num);
   		
   	 	if(isSuccess == true) {
	   	 	$(this).attr("src","../../../resources/bootstrap/img/bookmark_success_star.png");
		   	 alert("즐겨찾기에 등록되었습니다!");
   		} else {
   			$(this).attr("src","../../../resources/bootstrap/img/bookmark_star.png");
   			alert("즐겨찾기가 해제되었습니다!");
   		}
			
	});	
});
</script>

<body class="home-page">
	
	<section>
				<img src="../../../resources/bootstrap/images/home.jpg" alt="" />
	</section>

	<section>
		<div class="row" style="margin:0 5% 0 5%;">
			<div class="col-sm-12 col-md-12 col-md-offset-1" style="margin:0;"> 
				<p class="bestTitle">★내알못 베스트★</p>
				<div id="bestMHP3" class="portfolio grid-3">

				
				</div>
			</div>
		</div>
	</section>

	<hr>
	
	<section>
		<div class="row" style="margin:0 5% 0 5%;">
			<div class="col-sm-12 col-md-12 col-md-offset-1" style="margin:0;"> 
				<p class="bestTitle">★나만의루트 베스트★</p>
				<div id="bestMR3" class="portfolio grid-3">

				
				</div>
			</div>
		</div>
	</section>

</body>

</html>
